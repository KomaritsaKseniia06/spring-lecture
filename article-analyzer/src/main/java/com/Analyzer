package com.reader.article_analyzer;

import org.springframework.stereotype.Component;

import java.io.IOException;
import java.util.Set;

@Component
public class Analyzer {
    private final ArticleCategoryAnalyzer articleCategoryAnalyzer;
    private final ArticleCategorySaver articleCategorySaver;
    private final UserNotifier userNotifier;


    public Analyzer(ArticleCategoryAnalyzer articleCategoryAnalyzer, ArticleCategorySaver articleCategorySaver, UserNotifier userNotifier) {
        this.articleCategoryAnalyzer = articleCategoryAnalyzer;
        this.articleCategorySaver = articleCategorySaver;
        this.userNotifier = userNotifier;
    }

    public void analyze() throws IOException {
        Set<String> categories = articleCategoryAnalyzer.analyzeArticleContent("articles.json");
        articleCategorySaver.saveCategories(categories);
        userNotifier.notifyUsersAboutCategoryChanges();
    }
}
